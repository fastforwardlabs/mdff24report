<!DOCTYPE html>
    <html lang="en">
      <head>
  <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-K1QKY1ERLP"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-K1QKY1ERLP');
</script>
<meta charset="utf-8" />

<title>Text Style Transfer</title>
<meta name="description" content="An online research report on Text Style Transfer by Cloudera Fast Forward Labs." />
<meta property="og:title" content="Text Style Transfer" /> 
<meta property="og:description" content="An online research report on Text Style Transfer by Cloudera Fast Forward Labs." />
<meta property="og:image" content="https://text-style-transfer.fastforwardlabs.com/figures/FF24_cover.png" />
<meta property="og:url" content="https://text-style-transfer.fastforwardlabs.com" />
<meta name="twitter:card" content="summary_large_image" />

<meta name="viewport" content="width=device-width" />
<link rel="icon" type="image/x-icon" href="cldr-favicon.ico" />

<style type="text/css">
    
  @font-face {
    font-family: 'Plex Mono';
    src: url('fonts/IBMPlexMono-Regular.woff2') format('woff2'),
      url('fonts/IBMPlexMono-Regular.woff') format('woff');
    font-weight: normal;
    font-style: normal;
  }
  @font-face {
    font-family: 'Plex Mono';
    src: url('fonts/IBMPlexMono-Italic.woff2') format('woff2'),
      url('fonts/IBMPlexMono-Italic.woff') format('woff');
    font-weight: normal;
    font-style: italic;
  }
  @font-face {
    font-family: 'Plex Sans';
    src: url('fonts/IBMPlexSans-Regular.woff2') format('woff2'),
      url('fonts/IBMPlexSans-Regular.woff') format('woff');
    font-weight: normal;
    font-style: normal;
  }
  @font-face {
    font-family: 'Plex Sans';
    src: url('fonts/IBMPlexSans-Italic.woff2') format('woff2'),
      url('fonts/IBMPlexSans-Italic.woff') format('woff');
    font-weight: normal;
    font-style: italic;
  }
  @font-face {
    font-family: 'Plex Sans';
    src: url('fonts/IBMPlexSans-Bold.woff2') format('woff2'),
      url('fonts/IBMPlexSans-Bold.woff') format('woff');
    font-weight: bold;
    font-style: normal;
  }
  @font-face {
    font-family: 'Plex Sans';
    src: url('fonts/IBMPlexSans-BoldItalic.woff2') format('woff2'),
      url('fonts/IBMPlexSans-BoldItalic.woff') format('woff');
    font-weight: bold;
    font-style: italic;
  }
  
    * {
      box-sizing: border-box;
    }
    html {
      background: #fff;
      font-family: "Plex Sans", serif, sans-serif;
      font-size: 17.5px;
      line-height: 28px;
    }
    body {
      margin: 0;
    }
    .content {
      max-width: 64ch;
      padding-left: 2ch;
      padding-right: 2ch;
      margin: 0 auto;
      display: block;
      padding-bottom: 0px;
    }
   p, ul, ol {
      margin: 0;
    }
    ul, ol {
      padding-left: 3ch;
    }
  p {
   // text-indent: 3ch;
}
    li p:first-child {
      text-indent: 0;
    }

    #pdf-logo {
      display: none;
    }

   hr {
      margin: 0;
      border-top-color: black;
      margin-top: -0.5px;
      margin-bottom: 27.5px;
    }
  
h1, h2, h3, h4, h5, h6, button { font-size: inherit; line-height: inherit; font-style: inherit; font-weight: inherit; margin: 0; font-feature-settings: "tnum"; border: none; background: transparent; padding: 0;  }
button:focus, button:hover {
  background: rgba(0,0,0,0.125);
  outline: none;
}
h1 {
  font-size: 42px;
  line-height: 56px;
  font-weight: bold;
  margin-top: 14px;
  margin-bottom: 14px;
}
h2 {
  font-size: 31.5px;
  line-height: 42px;
  font-weight: bold;
  margin-top: 28px;
  margin-bottom: 14px;
}
h3 {
  font-size: 26.25px;
  line-height: 35px;
  font-weight: bold;
  margin-top: 14px;
  margin-bottom: 14px;
}
h4 {
  font-size: 21px;
  line-height: 28px;
  font-weight: bold;
  margin-top: 14px;
  margin-bottom: 14px;
}
h5 {
  font-size: 17.5px;
  line-height: 28px;
  margin-top: 14px;
  margin-bottom: 14px;
  font-weight: bold;
}
h6 {
  font-size: 17.5px;
  line-height: 28px;
  margin-top: 14px;
  margin-bottom: 14px;
  font-style: italic;
}
p {
  margin-bottom: 14px;
}
.content {
  position: relative;
  }
figure {
  margin: 0;
  margin-top: 14px;
  margin-bottom: 28px;
  display: block;
  position: relative;
  page-break-inside: avoid;
}
blockquote {
  margin: 0;
   margin-top: 14px;
  margin-bottom: 14px;
margin-left: 2ch;
}
blockquote + blockquote {
  margin-top: 0;
}
figcaption {
  font-family: "Plex Mono", serif, monospace;
  margin-top: 14px;
  font-size: 13.125px;
  line-height: 21px;
}
.info {
  background: #efefef;
  padding-left: 2ch;
  padding-right: 2ch;
  padding-top: 14px;
  padding-bottom: 14px;
  margin-bottom: 28px;
}
.info p:last-child {
  margin-bottom: 0;
}
img {
  display: block;
  position: relative;
  max-width: 100%;
  margin: 0 auto;
  page-break-inside: avoid;
}
code {
  font-size: 0.9em;
  line-height: 1.2;
  background: rgba(0,0,0,0.125);
  padding: 0 0.3em;
}
pre {
  font-size: 0.9em;
  line-height: 1.2;
  background: rgba(0,0,0,0.125);
  overflow-x: scroll;
  max-width: 100%;
  padding-left: 1ch;
  padding-right: 1ch;
  padding-top:0.625em;
  padding-bottom:0.625em;
}
pre code {
  background: transparent;
}

table {
  min-width: 100%;
  text-align: left;
  margin-top: 14px;
  font-size: 13.125px;
  line-height: 18.900000000000002px;
  border-collapse: collapse;
}
table, th, td {
  border: solid 1px black;
}
td {
  padding-left: 0.5ch;
  padding-right: 0.5ch;
  valign: top;
  vertical-align: top;
}
th {
  padding-left: 0.5ch;
  padding-right: 0.5ch;
  vertical-align: top;
  background: #efefef;
}
table ul, table ol {
  list-style-position: inside;
  padding-left: 0;
}

  a {
    color: inherit;
  }
  .table-of-contents {
    background: #efefef;
    position: fixed;
    left: 0;
    top: 0;
    width: 32ch;
    height: 100vh;
    overflow-y: auto;
    background: #efefef;
      // background: rgba(230,230,230,0.85);
      //   backdrop-filter: blur(5px);
  }
  body {
    padding-left: 32ch;
  }
  p:empty {
    display: none;
  }
  ul, ol {
  margin-bottom: 14px;
  }

  #report-iso {
    display: none;
  }

.table-of-contents {
    counter-reset: chapters;
}
 .table-of-contents ul {
    list-style: none;
    padding-left: 0;
    margin-bottom: 0;
  }
 .table-of-contents > ul {
  }
 .table-of-contents > ul > li {
    font-weight: bold;
  }
 .table-of-contents > ul > li {
    font-weight: bold;
   margin-bottom: 14px;
  }

 .table-of-contents > ul > li > ul > li {
    font-weight: normal;
    font-style: normal;
    text-transform: none;
    letter-spacing: 0;
    margin-left: 0;
  }
 .table-of-contents > ul > li > ul > li > ul > li {
    font-weight: normal;
    font-style: italic;
  }
 .table-of-contents a {
    text-decoration: none;
  }
  .table-of-contents a:hover {
    text-decoration: underline;
  }
 sup {
  }
  .table-of-contents ul a {
    display: block;
    padding-left: 24px;
    text-indent: -8px;
    padding-right: 16px;
  }
  .table-of-contents ul li a.active {
    position: relative;
    background: #ddd;
    // text-decoration: line-through;
  }

 .table-of-contents > ul > li > ul > li > a {
    font-size: 15.75px;
      line-height: 25.2px;
    // padding-left: 4ch;
  }
  .table-of-contents > ul > li > ul > li > ul > li > a {
    padding-left: 5ch;
  }

h1 {
    counter-reset: chp;
}
h2 {
  position: relative;
  display: block;
  page-break-before: always;
  padding-top: 28px;
}
  .toc-desktop-hidden .table-of-contents {
    width: auto;
  }
  .toc-desktop-hidden #contents-label {
    display: none;
  }
  .toc-desktop-hidden .table-of-contents ul {
    display: none;
  }
  body.toc-desktop-hidden {
    padding-left: 5ch;
  }
  body:before {
    content: " ";
    height: 28px;
    width: 96ch;
    background: black;
    position: absolute;
    left: 0;
    top: 0;
    z-index: 999;
    display: none;
  }
    #toc-header {
      margin-top: 14px;
      margin-bottom: 14px;
      margin-left: 1ch;
      margin-right: 1ch;
    }

  @media screen and (max-width: 1028px) {
    h1 {
      font-size: 36.75px;
      line-height: 49px;
      font-weight: bold;
      margin-top: 14px;
      margin-bottom: 14px;
    }
    .table-of-contents ul li {
    }

    #toc-header {
      margin-top: 7px;
      margin-bottom: 7px;
    }

    body {
      padding-left: 0;
      padding-top: 42px;
    }
    .content {
        overflow-wrap: break-word;
        word-wrap: break-word;
    }
    #contents-label {
      display: none;
    }
    .table-of-contents {
      height: auto;
      width: 100%;
      z-index: 3;
    }
  body.toc-mobile-show .content:before {
      content: "";
      position: fixed;
      left: 0;
      top: 0;
      bottom: 0;
      right: 0;
      background: rgba(0,0,0,0.25);
      z-index: 2;
      border-top: solid 42px #aaa;
    }

    .table-of-contents > ul {
      display: none;
    }
   body.toc-mobile-show {
      overflow: hidden;
    }
    body.toc-mobile-show #toc-header {
      margin-top: 7px;
      margin-bottom: 7px;
      position: relative;
    }
    body.toc-mobile-show .table-of-contents {
      width: 32ch;
      height: 100vh;
      max-width: calc(100% - 4ch);
      overflow: auto;
    }
   body.toc-mobile-show .table-of-contents > ul {
      display: block;
      padding-bottom: 28px;
      position: relative;
    }
    body.toc-mobile-show #contents-label {
      display: inline;
      position: relative;
    }
  }
}
</style>
<script>
    function inViewport(elem) {
      let bounding = elem.getBoundingClientRect();
      return (
        bounding.top >= 0 &&
        bounding.left >= 0 &&
        bounding.bottom <= (window.innerHeight || document.documentElement.clientHeight) &&
        bounding.right <= (window.innerWidth || document.documentElement.clientWidth)
      );
    };

    function setActive(target_id) {
      let selector = '.table-of-contents ul li a[href="#' + target_id + '"]'
      let link = document.querySelector(selector)
      if (link !== null) {
        link.className = 'active'
      }
    }

    window.addEventListener("load", (event) => {
      let headings = document.querySelectorAll('h2, h3');
      let links = document.querySelectorAll('.table-of-contents ul li a')

      observer = new IntersectionObserver((entry, observer) => {
        if (entry[0].intersectionRatio === 1) {
          for (let link of links) {
            link.className = ''
          }
          let target_id = entry[0].target.getAttribute('id')
          setActive(target_id)
        }
      }, { threshold: 1, rootMargin: "0px 0px -50% 0px" });

      let first = true
      for (let heading of headings) {
        if (first && inViewport(heading)) {
          setActive(heading.getAttribute('id'))
          first = false
        }
        observer.observe(heading);
      }

      document.querySelector('#toggle_contents').addEventListener('click', () => {
        let body = document.body
        if (window.innerWidth > 1027) {
          let hidden_class = "toc-desktop-hidden"
          if (body.className === hidden_class) {
            body.className = ''
          } else {
            body.className = hidden_class
          }
        } else {
          let show_class = "toc-mobile-show"
          if (body.className === show_class) {
            body.className = ''
          } else {
            body.className = show_class
          }
        }
      })

      for (let link of links) {
        link.addEventListener('click', (e) => {
          let href = e.target.getAttribute('href')
          let elem = document.getElementById(href.slice(1))
          window.scroll({
            top: elem.offsetTop - 28,
            left: 0,
            behavior: 'smooth'
          })
          if (window.innerWidth < 1028) {
            document.body.className = ''
          }
          e.preventDefault() 
        })
      }

      document.querySelector('.content').addEventListener('click', () => {
        if (window.innerWidth < 1028) {
          document.body.className = ''
        }
      })
      document.querySelector('.table-of-contents').addEventListener('click', (e) => {
        e.stopPropagation()
      })

      let mediaQueryList = window.matchMedia("(max-width: 1028px)");
      function handleBreakpoint(mql) {
        // clear any left over toggle classes
        document.body.className = ''
      }
      mediaQueryList.addListener(handleBreakpoint);
    }, false);
  </script>
</head>
      <body>
        <div class="content" style="position: relative;">
          <div id="html-logo" style="margin-top: 28px; line-height: 0; display: flex;">
            <a href="https://www.cloudera.com/products/fast-forward-labs-research.html"><img alt="Cloudera Fast Forward" style="display: block; height: 14px; margin-bottom: 7px;" src='figures/cloudera-fast-forward.png' /></a>
          </div>
          <div id="pdf-logo" style="margin-top: 28px; ">
            <a href="https://www.cloudera.com/products/fast-forward-labs-research.html">Cloudera Fast Forward</a>
          </div>
          <h1 id="text-style-transfer">Text Style Transfer</h1>
<p>FF24 · <em>September 2022</em></p>
<figure><img src="figures/FF24_cover.png" alt=""></figure>
<p><em>This is an applied research report by <a href="https://www.cloudera.com/products/fast-forward-labs-research.html">Cloudera Fast Forward Labs</a>. We write reports about emerging technologies, and conduct experiments to explore what’s possible. Read our full report about Text Style Transfer below, or <a href="/FF24-Text_Style_Transfer-Cloudera_Fast_Forward.pdf" target="_blank" id="report-pdf-download">download the PDF</a>
. The prototype accompanying this report – Exploring Intelligent Writing Assistance – demonstrates how the NLP task of text style transfer can be applied to enhance the human writing experience. <a href="https://huggingface.co/spaces/cffl/Exploring_Intelligent_Writing_Assistance">We hope you enjoy exploring it</a>.</em></p>
<p><div class="table-of-contents"><div id="toc-header" style="display: flex; font-weight: bold; text-transform: uppercase;">
     <div><button id="toggle_contents" style="padding-left: 0.5ch; padding-right: 0.5ch; cursor: pointer; position: relative; top: -1px;">☰</button><span id="contents-label" style="margin-left: 0;"> Contents</span></div>
  </div><ul><li><a href="#introduction">Introduction</a></li><li><a href="#background">Background</a><ul><li><a href="#what-is-text-style-transfer%3F">What is text style transfer?</a></li><li><a href="#what-is-style%3F">What is style?</a></li><li><a href="#use-cases">Use cases</a></li><li><a href="#challenges-and-considerations">Challenges and considerations</a></li></ul></li><li><a href="#neutralizing-subjectivity-bias">Neutralizing Subjectivity Bias</a><ul><li><a href="#motivation">Motivation</a></li><li><a href="#defining-the-task">Defining the task</a></li><li><a href="#dataset%3A-the-wiki-neutrality-corpus-(wnc)">Dataset: The Wiki Neutrality Corpus (WNC)</a></li><li><a href="#modeling-approach">Modeling approach</a></li><li><a href="#establishing-a-baseline">Establishing a baseline</a></li><li><a href="#modeling-the-full-dataset">Modeling the full dataset</a></li></ul></li><li><a href="#evaluation-metrics">Evaluation Metrics</a><ul><li><a href="#challenges-with-evaluating-tst">Challenges with evaluating TST</a></li><li><a href="#automated-evaluation-metrics">Automated evaluation metrics</a></li><li><a href="#evaluating-bart-with-sti-%26-cps">Evaluating BART with STI & CPS</a></li></ul></li><li><a href="#ethical-considerations">Ethical Considerations</a><ul><li><a href="#ethics-as-a-criteria-for-topic-selection-in-research">Ethics as a criteria for topic selection in research</a></li><li><a href="#designing-an-intelligent-writing-assistant">Designing an intelligent writing assistant</a></li></ul></li><li><a href="#conclusion">Conclusion</a></li></ul></div></p>
<h2 id="introduction">Introduction</h2>
<p>Today’s world of natural language processing (NLP) is driven by powerful transformer-based models that can automatically caption images, answer open-ended questions, engage in free dialog, and summarize long-form bodies of text – of course, with varying degrees of success. Success here is typically measured by the accuracy (Did the model produce a correct response?) and fluency (Is the output coherent in the native language?) of the generated text. While these two measures of success are of top priority, they neglect a fundamental aspect of language – <em>style</em>.</p>
<p>Consider the fictitious scenario where you engage an AI-powered chatbot to assist you with a shopping return for a damaged item. After sharing your intent with the bot, it responds with either of the following generated messages:</p>
<ol>
<li>“Give me a picture of the damage.”</li>
<li>“Could you please send me a picture of the damage?”</li>
</ol>
<p>While the first option may contain the correct next action (requesting proof of damage) with sound grammer, something about it feels brash and slightly off-putting in a customer experience setting where politeness is highly valued for customer retention. That’s because the expressed tone of politeness plays a critical role in smooth human communication. Of course, this is a non-trivial task for a machine learning model to be aware of as the phenomenon of politeness is rich, multifaceted, and depends on the culture, language, and social structure of both the speaker and addressed person<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup>.</p>
<p>This quick example highlights the importance of personalization and user-centered design in the successful implementation of new technology. For artificial intelligence systems to generate text that is seamlessly accepted into society, it is necessary to model language with consideration for style, which goes beyond merely just expressing semantics. In NLP, the task of adjusting the style of a sentence by rewriting it into a new style while retaining the original semantic meaning is referred to as <em>text style transfer (TST)</em>.</p>
<p>Through this report, we explore text style transfer through an applied use case – neutralizing subjectivity bias in text. We’ll start by providing an introduction to TST as a task and its potential use cases. Then, we’ll discuss our applied use case, modeling approach, and present a set of custom evaluation metrics for effectively quantifying model performance. Finally, we conclude with a discussion of ethics centered around our prototype: <a href="https://huggingface.co/spaces/cffl/Exploring_Intelligent_Writing_Assistance">Exploring Intelligent Writing Assistance</a>.</p>
<h2 id="background">Background</h2>
<h3 id="what-is-text-style-transfer%3F">What is text style transfer?</h3>
<p>Text style transfer is a natural language generation (NLG) task which aims to automatically control the style attributes of text while preserving the content<sup class="footnote-ref"><a href="#fn2" id="fnref2">[2]</a></sup>. To more formally define the task, TST seeks to take the sentence <strong>x<sub>s</sub></strong> with source attribute <strong>a<sub>s</sub></strong> as input and produce the sentence <strong>x<sub>t</sub></strong> with target attribute <strong>a<sub>t</sub></strong> that retains the style-independent content of <strong>x<sub>s</sub></strong>.</p>
<figure><img src="figures/FF24_1.png" alt="Figure 1: Example of text style transfer that brings impolite language into a polite tone."><figcaption>Figure 1: Example of text style transfer that brings impolite language into a polite tone.</figcaption></figure>
<p>Referencing the chatbot example from the introduction where the style attribute is <em>politeness</em>, we can see how the style of the input sentence with a source attribute of <em>impolite</em> is transferred to have the target attribute of <em>polite</em>. Despite the change in tone, the underlying semantic meaning of the two sentences remains largely unchanged.</p>
<p>Of course, politeness isn’t the only style attribute which one may seek to control. There is a diverse array of potential style attributes that can be modeled that are largely inspired by <em>pragmatics</em> - a branch of linguistics that studies facets of language that are not directly spoken, but rather implicitly hinted or suggested by a speaker and then interpreted by a reader. Within the domain of TST, there are some commonly explored style attributes such as politeness, formality, humor, emotion, toxicity, simplicity, biasedness, authorship, sentiment, gender, and political slant. The figure below presents illustrative examples for a handful of these common style transfer tasks.</p>
<figure><img src="figures/FF24_2.png" alt="Figure 2: Illustrative examples of common style attributes."><figcaption>Figure 2: Illustrative examples of common style attributes.</figcaption></figure>
<h3 id="what-is-style%3F">What is style?</h3>
<p>In order to frame a discussion around methods for automatically transferring style between two pieces of text, we must first establish some shared understanding of what <em>style</em> actually is and its distinction from <em>content</em>. In general, there are two schools of thought for teasing these apart - a <em>linguistic</em> definition of style and a <em>data-driven</em> definition of style.</p>
<p>The basic idea from a linguistic point-of-view is that a text’s style may be defined as <em>how</em> the author chose to express their content, from among many possible ways of doing so. We can therefore contrast the <em>how</em> of a text (style) from the <em>what</em> (content). Linguists look at hand-selected sets of content-independent features (stylistic devices) such as parts-of-speech, syntactic structures, and clause/sentence complexity measures, that in aggregate, can convey a particular style<sup class="footnote-ref"><a href="#fn3" id="fnref3">[3]</a></sup>. For example, the style attribute of <em>formality</em> is often associated with complex sentence structure, proper punctuation, use of third-person voice, and exclusion of contractions (e.g. you’re, won’t) and abbreviations (e.g TV, photos, SKU). While straightforward to interpret, this “rules-based” definition of style actually constrains what can constitute a style (or not a style) to the known set of stylistic devices that exist.</p>
<p>In contrast, the data-driven definition of style assumes a more generalized approach. In this paradigm, given any two corpora, content is the invariance between them, whereas style is the variance<sup class="footnote-ref"><a href="#fn4" id="fnref4">[4]</a></sup>. If we think of the linguistic definition of style as a <em>handcrafted</em> set of features, then the data-driven definition is a <em>learned</em> set of features. This simple definition of style opens the door to a broader range of indicators that may comprise style outside of just those that linguists have terms for. Of course, this comes with a tradeoff in interpretability as we lose the ability to attribute aspects of style to meaningful, explainable linguistic devices (like use of contractions or abbreviations).</p>
<p>This data-driven definition also encompasses more diverse style attribute types including those where style itself is determined not just by linguistic devices, but also by actual words and topic preferences. For instance, if we analyze our chatbot example from earlier, we could intuit that formulating a sentence as a question rather than a statement lends itself to politeness - something that both the linguistic <em>and</em> data-driven definitions of style could model. However, we could also correctly intuit that the use of the word “please” is indicative of more polite expression – something that the linguistic approach would exclude (because the word “please” isn’t a content-independent feature), but the data-driven approach would capture.</p>
<p>Deep learning architectures commonly used for language modeling today excel at distilling semantic meaning in generalized ways. For that reason, most recent TST work adopts this more encompassing, data-driven definition of style.</p>
<h3 id="use-cases">Use cases</h3>
<p>Text style transfer has many immediate applications in real world use cases today. It also has the potential to support various adjacent NLP tasks like improving data augmentation. Please refer to <a href="https://arxiv.org/pdf/2011.00416.pdf">this survey paper</a> that expands upon the following use cases and more.</p>
<h4 id="persona-consistent-dialog-generation">Persona-consistent dialog generation</h4>
<p>As we’ve already seen, text style transfer can play a critical role in making human-computer interaction more user-centric. People prefer a distinct and consistent persona (e.g. polite, empathetic, etc.) instead of emotionless or inconsistent persona<sup class="footnote-ref"><a href="#fn5" id="fnref5">[5]</a></sup>. Some people appeal more to humor vs. candor vs. drama. TST models could augment NLG pipelines to deliver personalized dialog on an individual user basis.</p>
<h4 id="intelligent-writing-assistants">Intelligent writing assistants</h4>
<p>Another industrial application of TST is to enhance the human writing experience. Authors could draft once, but automatically restyle that content to appeal to a variety of audiences - making their ideas more Shakespearean, polite, objective, humorous, or professional.</p>
<h4 id="text-simplification">Text simplification</h4>
<p>An inspiring use case for TST is to facilitate better communication between expert and non-expert individuals in certain knowledge domains. For example, automatically simplifying complicated legal, medical, or technical jargon into digestible terminology that a layperson can comprehend, or even lowering language barriers for non-native speakers<sup class="footnote-ref"><a href="#fn6" id="fnref6">[6]</a></sup>.</p>
<h4 id="neutralizing-subjectivity">Neutralizing subjectivity</h4>
<p>Subjective messaging in the form of framing, presupposing truth, and casting doubt is ubiquitous in all forms of writing. For certain texts where objectivity is strongly desired - like news, encyclopedias, textbooks - text style transfer could potentially offer a means to neutralize subjective attitudes<sup class="footnote-ref"><a href="#fn7" id="fnref7">[7]</a></sup>.</p>
<h3 id="challenges-and-considerations">Challenges and considerations</h3>
<p>While the idea of modeling the style of text is not new, it has regained attention in the NLP research community with the advent of Transformer models, and consequently a variety of neural methods for automating the task have been recently proposed. This section will explore some of these approaches, along with the challenges and considerations associated with text style transfer in practice.</p>
<h4 id="availability-of-usable-data">Availability of usable data</h4>
<p>In general, neural methods for TST can be categorized based on whether the working dataset has <em>parallel</em> text for a given attribute, or <em>non-parallel</em> corpora. Parallel datasets consist of pairs of text (i.e. sentences, paragraphs) where each text in the pair expresses the same meaning, but in a different style. Non-parallel datasets have no paired examples to learn from, but simply exist as mono-style corpora.</p>
<figure><img src="figures/FF24_3.png" alt="Figure 3: Parallel vs. non-parallel datasets."><figcaption>Figure 3: Parallel vs. non-parallel datasets.</figcaption></figure>
<p>For parallel datasets, TST can be formulated similar to a neural machine translation (NMT) problem where instead of translating between languages, we translate between styles. Most approaches adopt some form of a sequence-to-sequence model using an encoder-decoder architecture. While this approach is rather intuitive, the reality is that parallel datasets are rare to find and very difficult to construct. In combination with data-hungry deep learning models that demand copious training examples, obtaining sufficient parallel data for each desired style attribute presents an (often insurmountable) challenge.</p>
<h4 id="disentangling-style-from-content">Disentangling style from content</h4>
<p>Because of the difficulties with parallel data, much of the ongoing research in TST accepts the requirement of only using non-parallel corpora to model style. Without explicit paired examples, the task becomes increasingly difficult. A variety of approaches exist today that fall into three main buckets:</p>
<ol>
<li><strong>Replacement</strong> - also referred to as “Prototype Editing”, these methods aim to transfer style explicitly by first identifying components (words, phrases, etc.) of a given sentence that indicate the source style, removing them, and then substituting in new components that represent the target style</li>
<li><strong>Disentanglement</strong> - these methods attempt to implicitly tease apart source attribute style from content in a latent space, and then recombine the content with a new latent representation of style through generative modeling</li>
<li><strong>Pseudo-parallel corpus construction</strong> - tries to reformulate the problem in a supervised manner by creating pseudo-parallel examples from the non-parallel dataset using various tricks such as extracting/matching similar sentences from each corpora as pairs</li>
</ol>
<p>At the core of all these approaches lies a fundamental question about TST: <em>Is it actually possible to disentangle style from content? Or is content itself a factor that makes up style?</em></p>
<p>It seems the answer somewhat depends on the style attribute being considered and the definition of style adopted. For example, it has been argued that <em>politeness</em> is an interpersonal style that can be decoupled from content<sup class="footnote-ref"><a href="#fn8" id="fnref8">[8]</a></sup>. In contrast, it feels misguided to say that the style of <em>sentiment</em> can be separated from content when altering a sentence’s polarity from positive to negative directly changes its semantic meaning.</p>
<p>Overall, this idea of disentangling style from content has been widely discussed in the TST community and remains an open research question<sup class="footnote-ref"><a href="#fn9" id="fnref9">[9]</a></sup>.</p>
<h4 id="evaluation">Evaluation</h4>
<p>While the descriptions of parallel and non-parallel methods above may be oversimplifications of the actual approaches, it remains apparent how difficult such a task is. To add to the complexity of the problem, TST adopts all of the evaluation challenges faced in general natural language generation tasks, plus some.</p>
<p>To fundamentally evaluate the effectiveness of a NLG output, we must quantify how semantically accurate the generated text was (i.e Did the model say the right thing?), and also how fluent the output is (i.e. Was the thing comprehensible in native language?). The accuracy metric here needs to determine how well the semantic meaning was preserved in the output. For TST specifically, we also need to ensure the target style was achieved. In the end, comprehensive TST evaluation should consider three criteria - transferred style strength, semantic preservation, and fluency - which often requires human evaluation because automated metrics alone do not adequately characterize these complex properties.</p>
<h4 id="ethical-concerns">Ethical Concerns</h4>
<p>Because text style transfer exists at the crux of generative modeling and personalization, it is imperative that ethical considerations are brought to the forefront of any research agenda. In particular, it’s prudent to scrutinize both the beneficial <em>and harmful</em> ways in which a technology might be adopted as it may have far-reaching negative consequences.</p>
<p>For example, text style transfer has the potential to help reduce toxicity, hate-speech, and cyberbullying from online social platforms by modeling non-offensive text; a task that currently requires laborious effort via manual content moderation. However, should this technology prove successful, malicious users could just as easily repurpose such methods to model the opposite attribute - generating hateful, offensive text - which counteracts any intended social benefit.</p>
<p>Another example is seen in modeling political slant. A successful endeavor here raises obvious concerns as the ability to automatically transfer attitude and messaging between liberal and conservative tones has the potential to exploit political views of the masses if used for a malevolent social engineering agenda.</p>
<p>These types of task-specific ethical concerns exist in addition to those present with any NLG task – like encoded social bias or generated factual inconsistencies.</p>
<h2 id="neutralizing-subjectivity-bias">Neutralizing Subjectivity Bias</h2>
<h3 id="motivation">Motivation</h3>
<p>Subjective language is all around us – product advertisements, social marketing campaigns, personal opinion blogs, political propaganda, and news media, just to name a few examples. From a young age, we are taught the power of rhetoric as a means to influence others with our ideas and enact change in the world. As a result, this has become society’s default tone for broadcasting ideas. And while the ultimate morality of our rhetoric depends on the underlying intent (benevolent vs. malevolent), it is all inherently subjective.</p>
<p>However, there are certain modes of communication today like textbooks, encyclopedias, and [some] news outlets that do strive for objectivity. In these contexts, bias in the form of subjectivity is considered inappropriate, yet it remains prevalent because it is our rooted, societal tone. Subjectivity bias occurs when language that should be neutral and fair is skewed by feeling, opinion, or taste (whether consciously or unconsciously)<sup class="footnote-ref"><a href="#fn10" id="fnref10">[10]</a></sup>. The presence of this type of bias concealed within a supposedly objective mode of communication has the potential to wear down our collective trust and incite social animosity as opinions are incorrectly perceived as fact.</p>
<p>Since maintaining a neutral tone of voice is challenging and unnatural for humans, successful automation of this task has the potential to be useful for neutrality-striving authors and editors. Of course, this is no easy feat. Below, we introduce our approach to automatically neutralizing subjectivity bias in text using HuggingFace transformers.</p>
<h3 id="defining-the-task">Defining the task</h3>
<p>As mentioned earlier, Text Style Transfer (TST) is a natural language generation task which aims to automatically control the style attributes of text while preserving the content.</p>
<p>In this sense, the task of “neutralizing subjectivity bias” casts subjectivity as the style attribute. Given a subjective sentence, the goal is to generate a modified version of the sentence with the same semantic meaning, but in a neutral tone of voice. In the example below, we see that the source sentence uses the adjective “beautiful” when describing “Newark Academy’s campus”, which is a <em>subjective intensifier</em> that implies the author’s feelings about the topic at hand. This sentence can be “neutralized” simply by removing the subjective term as seen in Figure 1 below.</p>
<figure><img src="figures/FF24_4.png" alt="Figure 4: Example of text style transfer that brings inappropriately subjective text into a neutral point of view."><figcaption>Figure 4: Example of text style transfer that brings inappropriately subjective text into a neutral point of view.</figcaption></figure>
<p>A successful endeavor in this task is predicated on the ability to accurately define and model subjectivity, which is a challenge even for humans because the notion of subjectivity can be… well, subjective. Not all written manifestations of subjectivity bias are this obvious, and consequently, they often cannot be alleviated by a simple rule to remove a modifier word as we’ll see in later examples.</p>
<p>Luckily, there exist open bodies of knowledge like encyclopedias that do adhere to standards of neutral-toned language. For example, Wikipedia strictly enforces a <em>Neutral Point of View (NPOV)</em> policy which means representing content fairly, proportionately, and, as far as possible, without editorial bias<sup class="footnote-ref"><a href="#fn11" id="fnref11">[11]</a></sup>. To uphold the policy, an active community of editors are incentivized to identify and revise passages that are in violation of NPOV to attain encyclopedic content with a standard tone of neutrality.</p>
<h3 id="dataset%3A-the-wiki-neutrality-corpus-(wnc)">Dataset: The Wiki Neutrality Corpus (WNC)</h3>
<p>Because Wikipedia enforces this neutrality policy and maintains a complete revision history, the encyclopedia edits associated with an NPOV justification can be parsed out to form a dataset of aligned (subjective vs. neutral) sentence pairs. This realization led to the creation of the <a href="https://arxiv.org/pdf/1911.09709.pdf">Wiki Neutrality Corpus (WNC)</a> – a parallel corpus of 180,000 biased and neutralized sentence pairs along with contextual sentences and metadata – which we will use as the body of knowledge for our TST modeling endeavor. A few examples from WNC are displayed in Figure 2 below.</p>
<figure><img src="figures/FF24_5.png" alt="Figure 5: Samples from the Wiki Neutrality Corpus that demonstrate sentences before and after neutralization edits are made."><figcaption>Figure 5: Samples from the Wiki Neutrality Corpus that demonstrate sentences before and after neutralization edits are made.</figcaption></figure>
<p>Since the WNC is a parallel dataset, we can formulate our task of “neutralizing subjectivity bias” as a supervised learning problem. In this regard, we indirectly adopt Wikipedia’s NPOV policy as our definition of “neutrality” and aim to learn a model representation of these policy guidelines directly from the paired examples. But what exactly constitutes Wikipedia’s NPOV policy and how are these guidelines realized in practice?</p>
<p>The NPOV policy does not claim to allow <em>only</em> neutral facts or opinions. Rather, the goal is to present <em>all</em> facts and opinions <em>neutrally</em> (without editorial bias), even when those ideas themselves are biased<sup class="footnote-ref"><a href="#fn12" id="fnref12">[12]</a></sup>. NPOV advocates the following guidelines to achieve a level of neutrality that is appropriate for an encyclopedia<sup class="footnote-ref"><a href="#fn13" id="fnref13">[13]</a></sup>:</p>
<ul>
<li>Avoid stating opinions as facts</li>
<li>Avoid stating facts as opinions</li>
<li>Avoid stating seriously contested assertions as facts</li>
<li>Prefer non-judgemental language</li>
<li>Indicate the relative prominence of opposing views</li>
</ul>
<p>Upon analyzing actual examples of bias-driven NPOV edits in Wikipedia that result from this policy, the authors of <a href="https://aclanthology.org/P13-1162.pdf">Linguistic Models for Analyzing and Detecting Biased Language</a> and <a href="https://arxiv.org/pdf/1911.09709.pdf">Automatically Neutralizing Subjective Bias in Text</a> observed and categorized several underlying types of bias that appear throughout the WNC: <em>framing bias</em>, <em>epistemological bias</em>, and <em>demographic bias.</em></p>
<h4 id="framing-bias">Framing Bias</h4>
<p>Framing bias is the most explicit form of subjectivity bias and is realized when subjective words or phrases are linked to a particular point of view. As we saw in the example above, the adjective “beautiful” was used to describe the “68-acre campus”. These types of subjective intensifiers add directional force to a proposition’s meaning, and therefore reveal the author’s stance on a particular subject<sup class="footnote-ref"><a href="#fn14" id="fnref14">[14]</a></sup>.</p>
<h4 id="epistemological-bias">Epistemological Bias</h4>
<p>Epistemological bias results when using linguistic features that subtly presuppose the truth (or falsity) of a proposition and in doing so, modifies its believability. In this way, the author surreptitiously conveys a particular attitude or viewpoint onto the reader in an implicit manner. This type of subjectivity bias is much harder to discern and is often delivered via factive verbs, entailments, assertive verbs, and hedges.</p>
<figure><img src="figures/FF24_6.png" alt="Figure 6: Common ways in which epistemological bias is surfaced with corresponding examples."><figcaption>Figure 6: Common ways in which epistemological bias is surfaced with corresponding examples.</figcaption></figure>
<p>In the first line of Figure 3 above, we see that the term “revealed” is neutralized to “alleged”. This is a clear example of epistemological bias where a factive verb (“revealed”) is used to imply some truth about the subject (“a multinational scandal”), which ultimately may or may not be rooted in fact.</p>
<h4 id="demographic-bias">Demographic Bias</h4>
<p>Similar to epistemological bias, demographic bias occurs when an author utilizes language that implicitly presupposes truth about people of particular gender, race, religion, or other demographic group. For example, presupposing that all programmers are male through the choice of assigned pronouns<sup class="footnote-ref"><a href="#fn15" id="fnref15">[15]</a></sup>.</p>
<p>For more detailed discussion on these classes of subjectivity bias, please see <a href="https://aclanthology.org/P13-1162.pdf">this excellent source paper</a> where these definitions and examples are adapted from.</p>
<h3 id="modeling-approach">Modeling approach</h3>
<p>Now that we have an understanding of the TST task at hand and are familiar with the dataset we’ll be using, let’s discuss our approach to solving the problem. We will formulate Text Style Transfer as a conditional generation task and fine-tune a pre-trained<a href="https://huggingface.co/facebook/bart-base"> </a>BART model on the parallel Wiki Neutrality Corpus in similar fashion to a text summarization use case.</p>
<p>Let’s dig into what this means.</p>
<h4 id="conditional-generation">Conditional Generation</h4>
<p>Recall our goal from earlier: Given a subjective sentence, the goal is to generate a modified version of that sentence with the same semantic meaning, but in a neutral tone of voice.</p>
<figure><img src="figures/FF24_7.png" alt="Figure 7: High level TST objective where the goal is to generate output text provided some input text."><figcaption>Figure 7: High level TST objective where the goal is to generate output text provided some input text.</figcaption></figure>
<p>By default, we have a generative modeling problem. But how do we go about generating text? It all starts with a language model, which is fundamental to most modern NLP tasks. At its core, a language model is a learned probability distribution over a sequence of words. We can use this probability distribution to estimate the conditional probability of the next word in a sequence, given the prior words as context.</p>
<figure><img src="figures/FF24_8.png" alt="Figure 8: Autoregressive language modeling uses a learned probability distribution to estimate subsequent tokens provided an initial sequence of tokens."><figcaption>Figure 8: Autoregressive language modeling uses a learned probability distribution to estimate subsequent tokens provided an initial sequence of tokens.</figcaption></figure>
<p>In Figure 8 above, we see that starting with the input sequence “I am a”, the language model is able to iteratively generate subsequent words, one at a time. This describes the fundamental workings of a common NLP method called autoregressive language modeling where the goal is to predict future values from past values (i.e. guess the next token having seen all the previous ones). The notable GPT (and all its descendants) is a popular example of this type of model.</p>
<p>While this is an effective strategy for generating text broadly, it is insufficient for our TST task because for TST we need to generate text that is <em>conditioned</em> on our input sentence. Notice that autoregressive models can only generate text a.) based on the statically learned language model and b.) provided an initial sequence of words as a prompt for it to auto-regressively continue on with. In the case of TST, we do not have an initial sequence of a few words as the prompt, rather we have a complete sentence as the prompt that needs to be rewritten from scratch.</p>
<p>What we actually need is a sequence-to-sequence (seq2seq) model to allow for <em>conditional</em> text generation.</p>
<figure><img src="figures/FF24_9.png" alt="Figure 9: Conditional language modeling uses a learned probability distribution to estimate subsequent tokens conditioned on some input context."><figcaption>Figure 9: Conditional language modeling uses a learned probability distribution to estimate subsequent tokens conditioned on some input context.</figcaption></figure>
<p>As the name suggests, seq2seq models generate an output sequence conditioned on an input sequence and are the standard class of models for tasks like machine translation, summarization, and abstractive questions answering. In Figure 6 above, we see that the input context <strong>X</strong> is used by the model to generate the first output word (“I”). The generation process then continues in an autoregressive fashion similar to the standard language model, except that for each new term generated, the output is based on the sequence generated thus far <em>as well as</em> the input context (<strong>X)</strong>.</p>
<p>This high level discussion helps develop intuition for the general modeling approach (inputs/outputs), but omits many fine details. What is this blackbox language model and how does it “learn” probability distributions over sequences of words? How can it understand the intricate factors that determine subjective vs. neutral language? And how does this model actually condition its outputs based on some input?</p>
<p>We’ll answer these questions by taking an indepth look at one particular seq2seq model used in our experimentation called BART and see how it operates as a pre-trained language model.</p>
<h4 id="bart-as-a-conditional-language-model">BART as a Conditional Language Model</h4>
<p>Self supervision is a strategy by which models can learn directly from unlabeled data (text in this case), which is crucial for our TST application because we only have a limited number of labeled examples in our parallel WNC corpus. Therefore, self supervised learning (SSL) allows us to first pretrain a model on enormous bodies of unlabeled text to develop a basic understanding of the English language (i.e. develop a language model). We can then fine-tune this robust representation with the smaller set of parallel training examples from WNC to hone in on the specific patterns attributed to subjective vs. neutral language – a standard process known as transfer learning. For a more detailed review on this topic, see our report <a href="https://transfer-learning.fastforwardlabs.com/">FF11: Transfer Learning for Natural Language Processing</a>.</p>
<p>BART is one instance of a model that can be used for self-supervised learning on text data. In particular, BART is a denoising autoencoder that uses a standard Transformer-based architecture for pretraining sequence-to-sequence models, but with a few tricks.</p>
<figure><img src="figures/FF24_10.png" alt="Figure 10: BART is implemented with a bidirectional encoder over corrupted text and a left-to-right autoregressive decoder that attends to the encoded latent representation to generate an output that minimizes the negative log likelihood of the original input document. Image is adapted from the source paper."><figcaption>Figure 10: BART is implemented with a bidirectional encoder over corrupted text and a left-to-right autoregressive decoder that attends to the encoded latent representation to generate an output that minimizes the negative log likelihood of the original input document. Image is adapted from the <a href="https://arxiv.org/pdf/1910.13461.pdf">source paper.</a></figcaption></figure>
<p>BART is pre-trained in a self-supervised fashion on 160GB of news, books, stories, and web text by corrupting input sentences with a noising function and then learning a model to reconstruct the original text (i.e. denoising the corrupted signal)<sup class="footnote-ref"><a href="#fn16" id="fnref16">[16]</a></sup>. The corrupting function works by randomly applying the following transformations (as depicted in Figure 8 below):</p>
<ul>
<li><strong>Text Infilling:</strong> A number of text spans (zero-length, single, or multiple words) are sampled and hidden with a mask token. This teaches the model to predict if, how many, and which tokens are missing from a segment of the sentence.</li>
<li><strong>Sentence Permutation:</strong> Input sentences are shuffled in random order in order to teach the model to structure logical statements sequentially.</li>
</ul>
<figure><img src="figures/FF24_11.png" alt="Figure 11: The two noising transformations that were empirically selected by BART’s authors. Image is adapted from the source paper."><figcaption>Figure 11: The two noising transformations that were empirically selected by BART’s authors. Image is adapted from the <a href="https://arxiv.org/pdf/1910.13461.pdf">source paper.</a></figcaption></figure>
<p>In Figure 11 above, we see how noise is first introduced to the input text sequence as tokens are randomly masked. The corrupted document is then processed by a bidirectional encoder (which attends to the full input sequence, forward and backward) to extract out a latent representation of the input. This latent representation gets passed on to the decoder which auto-regressively generates an output sequence conditioned on the latent representation. Reconstruction error is calculated with cross-entropy loss by comparing the original input sequence with the decoder’s output (i.e. did the model reconstruct the corrupted input correctly?).</p>
<p>Rather than introducing novel techniques, BART’s effectiveness comes from combining the strengths of many advances before it into one empirically driven, cohesive strategy – the architecture of <a href="https://arxiv.org/pdf/1706.03762.pdf">original Transformer</a>, bidirectional encodings from <a href="https://arxiv.org/pdf/1810.04805.pdf">BERT</a>, autoregressive generation from <a href="https://s3-us-west-2.amazonaws.com/openai-assets/research-covers/language-unsupervised/language_understanding_paper.pdf">GPT</a>, longer training + larger batch sizes + longer sequences + dynamic masking from <a href="https://arxiv.org/pdf/1907.11692.pdf">RoBERTa</a>, and span masking from <a href="https://arxiv.org/pdf/1907.10529.pdf">SpanBERT</a>.</p>
<h3 id="establishing-a-baseline">Establishing a baseline</h3>
<p>As with any machine learning problem, it’s important to establish a baseline model to serve as a performance benchmark to measure progress against. Upon releasing the WNC dataset, the authors simultaneously released their modeling approach, dataset splits, and results for this TST task, which serve as an excellent benchmark for us to levelset our modeling approach against.</p>
<h4 id="competitive-benchmark">Competitive Benchmark</h4>
<p>The paper authors limited their experimentation to a subset of the dataset that only includes NPOV-edits where the Wikipedia editor changed or deleted just a single word in the source text. From our study on the types of bias present in WNC above, we infer that a larger portion of the revisions in this sample consist of framing bias (the most explicit, and therefore easiest type of subjectivity to identify and correct) in comparison to the full WNC corpus. This choice resulted in using just a quarter of the full dataset (~54,000 training pairs) and from that, the authors separated out a random sample of 700 pairs for a development set and 1000 pairs for a test set.</p>
<p>The authors employ two modeling approaches that are both based on an encoder-decoder architecture similar to BART, but with several key differences including the noising function, decoder model type (LSTM RNN vs. attention-based Transformer), and training configuration. For a full description of their modeling setup, see <a href="https://arxiv.org/pdf/1911.09709.pdf">Section 3 of the paper.</a></p>
<p>The authors quantitatively assess their model performance with two metrics – <em>BLEU score</em> and <em>accuracy</em>.</p>
<ol>
<li><strong>BLEU score (bilingual evaluation understudy)</strong> is a common metric used to evaluate the quality of machine translation outputs by looking at the overlap of words and n-grams between a model generated output and a human-generated reference example. BLEU scores range from 0 to 1, where values closer to 1 represent higher degree of similarity.</li>
<li><strong>Accuracy</strong> here is defined as the proportion of all decodings that exactly matched the ground truth references.</li>
</ol>
<p>Across the two modeling approaches, the author’s achieve maximum scores of 93.94 BLEU and 45.80 accuracy on the one-word subset of WNC.</p>
<h4 id="implementing-bart-on-wnc">Implementing BART on WNC</h4>
<p>The WNC corpus comes cleanly packaged with sentence pairs “pre” and “post” edit for each revision. Prior to modeling the one-word subset with BART, some light exploratory analysis was performed to inform preprocessing decisions.</p>
<figure><img src="figures/FF24_a1.png" alt="Figure 12: Histogram plot depicting the distribution of text length (both pre and post edit) for all revisions in the training set. Since this plot visualizes both pre and post edit lengths, there are actually ~108k data points represented here (54k each)."><figcaption>Figure 12: Histogram plot depicting the distribution of text length (both pre and post edit) for all revisions in the training set. Since this plot visualizes both pre and post edit lengths, there are actually ~108k data points represented here (54k each).</figcaption></figure>
<p>The distribution of text length (when naively tokenized by whitespace) is consistent across the provided train/dev/test splits with a median sentence length of 23 tokens. From Figure 9 above, we see that there is a long right tail of sentence pairs by length indicating some potential outliers or data quality issues.</p>
<figure><img src="figures/FF24_a2.png" alt="Figure 13: The distribution of revisions by the net change in word count (pre and post edit) expressed as a percentage of total revisions."><figcaption>Figure 13: The distribution of revisions by the net change in word count (pre and post edit) expressed as a percentage of total revisions.</figcaption></figure>
<p>When looking at the percentage of sentence pairs grouped by the change in word count before and after the editing (Figure 10), we see that ~50% of revisions are subtractive in nature (i.e. delete one word) and ~38% are net-even in sentence length (i.e. replacing one word). Oddly, we observe some examples where two or more words are removed, which is unexpected given the definition of this subset from WNC.</p>
<p>To account for all of these concerns, the following preprocessing steps are taken:</p>
<ul>
<li>Remove records with a pre-edit sentence length above the 99th percentile</li>
<li>Remove records with a pre-edit sentence length below the 1st percentile</li>
<li>Remove records with a net subtraction of more than one word</li>
<li>Remove records with a net addition of more than 4 words (manual inspection shows these are caused by data quality issues like improper punctuation)</li>
</ul>
<p>For modeling, we make extensive use of the mighty Huggingface transformers library by saving WNC as a <a href="https://huggingface.co/docs/datasets/index">HuggingFace dataset</a>, initializing the <a href="https://huggingface.co/docs/transformers/model_doc/bart#transformers.BartForConditionalGeneration">BartForConditionalGeneration</a> model with <a href="https://huggingface.co/facebook/bart-base">facebook/bart-base</a> pretrained weights, and adapting the <a href="https://github.com/huggingface/transformers/tree/main/examples/pytorch/summarization">summarization fine-tuning script</a> for our TST-specific needs. We fine-tune the model for 10 epochs on an NVIDIA Tesla V100 GPU with a batch size of 8, evaluating BLEU and accuracy (with beam search + beam width of 4) every 1000 steps. (Note that when fine-tuning the model with the parallel examples, the noising function is turned off so an uncorrupted document is passed to both the encoder and decoder.)</p>
<p>The best model from training achieves 93.36 BLEU and 47.39 accuracy. While our results are competitive, they cannot be directly compared with the WNC authors’ because of differences in preprocessing. Despite this, they do provide sufficient validation of our approach as a means to automatically neutralize subjectivity bias in text.</p>
<h3 id="modeling-the-full-dataset">Modeling the full dataset</h3>
<p>Our efforts thus far in developing a baseline model have affirmed our modeling approach and laid a foundation to improve upon. In the following section, we apply the same <a href="https://github.com/fastforwardlabs/text-style-transfer/blob/main/scripts/prepare_data.py">data preprocessing steps</a> and <a href="https://github.com/fastforwardlabs/text-style-transfer/blob/main/scripts/train/seq2seq/train_seq2seq.py">model training configuration</a> to the full dataset consisting of ~180,000 subjective-to-neutral sentence pairs that include the one-word edits that we used before, as well as all the sentence pairs with more than one-word edits – a materialy more difficult generative modeling task. We also propose a set of custom automated evaluation metrics aimed to better quantify the subtleties of text style transfer than traditional metrics.</p>
<h2 id="evaluation-metrics">Evaluation Metrics</h2>
<h3 id="challenges-with-evaluating-tst">Challenges with evaluating TST</h3>
<p>Evaluating the quality of machine generated text is hard. Human evaluation is regarded as the best indicator of quality, but unfortunately is expensive, slow, and lacks reproducibility, making it a cumbersome approach for validating model performance. For this reason, NLP practitioners often rely on automated evaluation metrics to serve as a cheap and quick proxy for human judgment. Of course, this compromise comes with tradeoffs.</p>
<p>Traditional automated metrics like the <a href="https://aclanthology.org/P02-1040.pdf">BLEU score</a> – the most common metric for evaluating neural machine translation (NMT) – work by counting the lexical n-gram overlap between generated outputs and human-annotated, gold-standard references. As we saw in the previously, BLEU is one of the metrics used by the <a href="https://arxiv.org/pdf/1911.09709.pdf">WNC paper authors</a> to benchmark their model performance against a set of references. Consider the task of comparing the following candidate sentence with the two references while evaluating for semantic equivalence.</p>
<p><strong>Candidate:</strong> He is a great singer.</p>
<p><strong>Reference #1:</strong> He sings really well.</p>
<p><strong>Reference #2:</strong> He is a great writer.</p>
<p>As humans, it’s obvious that <em>Reference #1</em> means basically the same thing as the <em>Candidate</em>, while <em>Reference #2</em> changes the entire semantic meaning. However, because BLEU score only measures counts of identical n-grams, <em>Reference #2</em> actually scores higher than <em>Reference #1</em> by this metric. This highlights one of BLEU’s [many] shortcomings in that it fails to robustly match paraphrases, which leads to performance underestimation as semantically-correct phrases are penalized because they differ in lexical form<sup class="footnote-ref"><a href="#fn17" id="fnref17">[17]</a></sup>.</p>
<p>While it’s clear that the BLEU metric itself is flawed, the broader “candidate-to-reference” based NMT evaluation strategy itself also poses issues for evaluating text style transfer. That’s because style transfer is a one-to-many task, which means that there are several suitable references for any one source sentence<sup class="footnote-ref"><a href="#fn18" id="fnref18">[18]</a></sup>. Therefore, a high-quality style transfer generation may have a low BLEU score towards a reference as we saw in the previous example. Rather than relying on gold references, <em>reference-free</em> evaluation methods have been found <a href="https://arxiv.org/pdf/2202.08479.pdf">to better align with human judgements</a> in the analogous task of paraphrase generation.</p>
<p>In this reference-free paradigm, we ignore ground-truth annotations and compare model output directly with model input. Let’s now consider the scenario wherein we feed the sentence “He is a great singer.” to our text style transfer model to which it produces an output of “He is a great writer.” The first thing we notice is the subjectivity in the sentence has not been neutralized (evidenced by the word “great” in both the input and output sentences) and, worse, the very <em>meaning</em> of the sentence has changed – singer and writer are not the same thing!</p>
<p>Unfortunately, BLEU was not designed to detect style, and as we already saw, it’s not great at assessing semantics either. We’d end up with a really high evaluation score for a really bad model! For text style transfer, a “one size” score does <em>not</em> fit all. We need a comprehensive approach to evaluating TST.</p>
<p>As discussed in our introduction section above, a comprehensive evaluation of quality for text style transfer output should consider three criteria.</p>
<ol>
<li><strong><em>Style strength</em></strong> - To what degree does the generated text achieve the target style?</li>
<li><strong><em>Content preservation</em></strong>- To what degree does the generated text retain the semantic meaning of the source text?</li>
<li><strong><em>Fluency</em></strong>- To what degree does the generated text appear as if it were produced naturally by a human?</li>
</ol>
<p>All three criteria are important in making a determination of quality. If our model transfers text from subjective to neutral tone, but omits or changes an important piece of information (e.g. a proper noun or subject), it fails to preserve the meaning of the original text. On the flip side, if the model reproduces the source text exactly as is, it would have perfect content preservation, but fail completely in style transfer. Finally, the text generation is useless if it contains all the expected tokens, but in an illegible sequence.</p>
<h3 id="automated-evaluation-metrics">Automated evaluation metrics</h3>
<p>In the following sections, we’ll discuss reference-free, task-specific metrics aimed at tackling the first two of these criteria while also defining our implementation and design choices.</p>
<h4 id="style-strength">Style Strength</h4>
<p>A common automated method for evaluating transferred style strength involves training a classification model to distinguish between style attributes. At evaluation time, the classifier is used to determine if each style transfer output is in fact classified as the intended target style. Calculating the percentage of total text generations that achieve the target style provides a measure of style transfer strength.</p>
<p>While this approach serves as a strong foundation for assessing style transfer, its binary nature means that a quantifiable score only exists in aggregate. The authors of <a href="https://arxiv.org/pdf/1904.02295.pdf">Evaluating Style Transfer for Text</a> improve upon this idea with the realization that rather than count how many outputs achieve a target style, we can capture more nuanced differences between the style distributions of the input and output text using Earth Mover’s Distance (EMD)<sup class="footnote-ref"><a href="#fn19" id="fnref19">[19]</a></sup>. The EMD metric calculates the minimum “cost” to turn one distribution into the other. In this sense, we can interpret EMD between style class distributions (i.e. classifier output) as the intensity (or magnitude) of the style transfer. Ultimately, this metric called <em>Style Transfer Intensity (STI)</em> produces a score that holds meaning on a per-sample, as well as in-aggregate basis.</p>
<h5 id="implementation">Implementation</h5>
<p>Figure 14 below describes the logical workflow used in our implementation of Style Transfer Intensity.</p>
<figure><img src="figures/FF24_12.png" alt="Figure 14: Style Transfer Intensity metric using a BERT classification model."><figcaption>Figure 14: Style Transfer Intensity metric using a BERT classification model.</figcaption></figure>
<p>First (1), a fine-tuned text style transfer model (BART) is used to generate neutralized text <em>(X<sub>N</sub>)</em> from a subjective input <em>(X<sub>S</sub>)</em>. This forms the pair of text that we will be calculating the style transfer intensity between.</p>
<p>Then (2) both texts are passed through a fine-tuned, Transformer-based classification model (BERT) to produce a resulting style distribution for each text (<em>d<sub>S</sub></em>, <em>d<sub>N</sub></em>). These style distributions can be visualized at the bottom of Figure 1.</p>
<p>Finally (3), Earth Mover’s Distance is calculated on the two distributions to produce a resulting STI score. Note that like the original paper author’s, we penalize STI by negating the EMD score if the output text style distribution moves further away from the target style.</p>
<div class="info">
<p><strong>Fine-tuning the BERT Classifier</strong></p>
<p>The BERT model from (2) has been fine-tuned on the same style classification task for which the style transfer model was also trained on. In this case, that means reformatting records in WNC from <em>source_text | target_text</em> pairs into <em>source_text: subjective; target_text: neutral</em> labels. In doing so, we maintain the same data splits (train/test/validation), but double the number of records in each split since each sentence pair record from the style transfer dataset becomes two independent examples in the classification dataset.</p>
<p>For training, we initialize <a href="https://huggingface.co/docs/transformers/model_doc/auto#transformers.AutoModelForSequenceClassification">HuggingFace’s AutoModelforSequenceClassification</a> with <a href="https://huggingface.co/bert-base-uncased">bert-base-uncased</a> pre-trained weights and perform a hyperparameter search over: batch size [16, 32], learning rate [3e-05, 3e-06, 3e-07], weight decay [0, 0.01, 0.1] and batch shuffling [True, False] while training for 15 epochs.</p>
</div>
<p>We monitor performance using accuracy as we have a perfectly balanced dataset and assign equal cost to false positives and false negatives. The best performing model produces an overall accuracy of 72.50% and <a href="https://huggingface.co/cffl/bert-base-styleclassification-subjective-neutral">has been published</a> to the HuggingFace model registry for experimental use – please reference our <a href="https://github.com/fastforwardlabs/text-style-transfer/blob/main/scripts/train/classifier/train_classifier.py">training script</a> and <a href="https://github.com/fastforwardlabs/text-style-transfer/blob/main/notebooks/WNC_full_style_classifier_evaluation.ipynb">classifier evaluation notebook</a> for further details.</p>
<h4 id="content-preservation">Content Preservation</h4>
<p>Measuring content preservation between input and output of a style transfer model is often likened to measuring document similarity. As we’ve mentioned, there are numerous techniques used to quantify similarity between text including traditional lexical-based metrics (e.g. BLEU, METEOR, ROUGE) and newer embedding-based metrics (e.g. WMD, MoverScore, SBERT). However, content preservation in the context of reference-free text style transfer evaluation is uniquely challenging. That’s because these similarity metrics fail to account for the aim of style transfer modeling, which is to alter style by necessarily changing words. Therefore, intended differences (changes in style) between source and target text are often incorrectly penalized<sup class="footnote-ref"><a href="#fn20" id="fnref20">[20]</a></sup>.</p>
<p>To evaluate content preservation more precisely, attempts have been made to first distinguish between semantic and stylistic components of text, and then meaningfully quantify the similarity of just the semantic component alone. While there is open debate about whether it’s possible to actually decouple style from content in free text, intuition leads us to believe that our style attribute of “subjectivity” is expressed, at least in part, through select words. For example, our <a href="https://github.com/fastforwardlabs/text-style-transfer/blob/main/notebooks/WNC_oneword_EDA.ipynb">EDA findings</a> have shown that the presence of certain modifiers (adjectives and adverbs) are strong indicators of subjective content.</p>
<p><a href="https://arxiv.org/pdf/1904.02295.pdf">Previous efforts</a> have approached this style disentanglement process by isolating just the content-related words in each sentence (i.e. masking out any style-related words). They do this by training a style classifier and inspecting the model for its most important features (i.e. words). These strong features form a <em>style lexicon</em>. At evaluation time, any style-related words from the lexicon that exist in the input or output texts are masked out – thus leaving behind only content-related words. These “style-free” sentences can then be compared with one of the many similarity measures to produce a content preservation score.</p>
<p>We draw inspiration from the aforementioned tactic of “style masking” as a means to separate style from content, but implement it in a different manner.</p>
<h5 id="implementation-2">Implementation</h5>
<p>Rather than construct a global style lexicon based on model-level feature importances, we dynamically calculate local, sentence-level feature importances at evaluation time. We prefer this method because the success of the Transformer architecture has shown that contextual language representations are stronger than static ones. This approach allows us to selectively mask style-related tokens depending on their function within a particular sentence (i.e. some words take on different meaning depending on how they are used in context) instead of relying on a contextually-unaware lexicon lookup.</p>
<p>We accomplish this by applying a popular model interpretability technique called <a href="https://arxiv.org/pdf/1703.01365.pdf">Integrated Gradients</a> to our fine-tuned BERT subjectivity classifier which explains a model’s prediction in terms of its features. This method produces <em>word attributions</em>, which are essentially importance scores for each token in a sentence that indicate how much of the prediction outcome is attributed to that token.</p>
<figure><img src="figures/FF24_a3.png" alt="Figure 15: Word attributions visualized with Transformers Interpret for two sentences using integrated gradients on the fine-tuned BERT classification model. Positive attribution numbers (green) indicate a token contributes positively towards the predicted class (“subjective”), while negative numbers (red) indicate a word contributes negatively towards the predicted class."><figcaption>Figure 15: Word attributions visualized with <a href="https://github.com/cdpierse/transformers-interpret">Transformers Interpret</a> for two sentences using integrated gradients on the fine-tuned BERT classification model. Positive attribution numbers (green) indicate a token contributes positively towards the predicted class (“subjective”), while negative numbers (red) indicate a word contributes negatively towards the predicted class.</figcaption></figure>
<p>The figure above demonstrates the power of contextual representations. In the first sentence (1), we see that the word “passing” is strongly attributed to the subjective classification of this sentence. That’s because the term “passing” is a euphemism for “death”; a common NPOV-related correction in the WNC dataset. However, the term “passing” also appears in the second sentence (2), but is not attributed to the overall classification. That’s because the BERT model recognizes that when used in this context, “passing” does not suggest death, but rather the act of physical movement, which is neutral in tone. Had we used a global style lexicon to replace subjective words, “passing” would have been erroneously removed from the second sentence.</p>
<p>Provided these token level attribution scores, we must then select which are considered stylistic elements to be masked out. To do so, we sort tokens in each sentence by the absolute, normalized attribution score and calculate a cumulative sum. This vector allows us to enforce a threshold on how much of the “total style” should be masked from the sentence without having to specify an explicit number of tokens.</p>
<figure><img src="figures/FF24_13.png" alt="Figure 16: Style masking logic determines which tokens are considered style elements and therefore masked out from the sentence prior to calculating similarity measure."><figcaption>Figure 16: Style masking logic determines which tokens are considered style elements and therefore masked out from the sentence prior to calculating similarity measure.</figcaption></figure>
<p>In Figure 16 above, we see how cumulative attribution scores form the basis of style token selection. In this example, the terms “elegant” and “striking” combined account for ~35% of the style classification importance. This methodology allows us to set a tunable threshold whereby we mask out all tokens that contribute to the top X% of classification importance. To “mask out” style tokens, we simply replace them with either the informationless “[PAD]” token or remove them completely by deleting in-place.</p>
<p>The goal of this masking activity is to create “style-independent” versions of the original input and output sentences. These style-independent texts are then encoded using a generic, pre-trained SentenceBERT model to produce sentence level embeddings. SentenceBERT is a modified version of BERT that uses siamese and triplet network structures to derive semantically meaningful sentence representations that can be compared easily using cosine similarity (see the section <em>“To BERT or not to BERT”</em> from our report on <a href="https://few-shot-text-classification.fastforwardlabs.com/">Few-Shot Text Classification</a> for more on SentenceBERT). We chose this embedding-based similarity method because it overcomes the limitations of strict string matching methods (like BLEU) by comparing continuous representations rather than lexical tokens.</p>
<p>Figure 17 below summarizes the logical workflow used in our implementation of Content Preservation Score.</p>
<figure><img src="figures/FF24_15.png" alt="Figure 17: Content Preservation Score metric using BERT-based word attributions for style masking and SentenceBERT embeddings for similarity."><figcaption>Figure 17: Content Preservation Score metric using BERT-based word attributions for style masking and SentenceBERT embeddings for similarity.</figcaption></figure>
<p>To begin (1), a fine-tuned text style transfer model (BART) is used to generate neutralized text <em>(X<sub>N</sub>)</em> from a subjective input <em>(X<sub>S</sub>)</em> .</p>
<p>Style tokens are then masked from both texts (2) using the methodology described in Figure 3 above to produce versions that contain only content-related tokens.</p>
<p>Next (3), the content-only texts are passed through a generic, pre-trained SentenceBERT model to produce a sentence embedding for each text (<em>e<sub>S</sub></em> , <em>e<sub>N</sub></em>). Finally (4), we calculate cosine similarity between the embedding representations.</p>
<h4 id="considerations">Considerations</h4>
<p>While the high-level reasoning behind our implementations of STI and CPS make logical sense, there are nuances to the implementation that create room for error and jeopardize their effectiveness in measuring text style transfer. This is true of all automated metrics, and so we discuss these considerations below and recognize their importance as focus areas for future research.</p>
<h5 id="experimentally-determining-cps-parameters">Experimentally determining CPS parameters</h5>
<p>To determine a default attribution threshold and masking strategy for our CPS metric, we experimentally searched over threshold values of 10% - 50% by 10% increments and masking strategies of “[PAD]” vs. removal while monitoring content preservation score on the held out test split. We also compare these parameter combinations to a case where no style masking is performed at all.</p>
<figure><img src="figures/FF24_a4.png" alt="Figure 18: Content preservation score distributions across various experimental settings for style threshold and masking strategy."><figcaption>Figure 18: Content preservation score distributions across various experimental settings for <em>style threshold</em> and <em>masking strategy</em>.</figcaption></figure>
<p>We found that for each incremental threshold value, token removal produces a slightly higher average CPS score than replacement with “[PAD]” token. We also see that regardless of the parameter combination, all cases result in a lower median similarity score than had no style-masking been applied at all (see far right column in Figure 5). This makes sense because the more tokens we mask, the more opportunity there is to erroneously remove a piece of content instead of a stylistic element.</p>
<p>The only true way to determine the “best” parameter combination is to look at how CPS correlates with human evaluated scores. However, since we don’t have access to manual evaluation scores, we select the combination that produces the highest outright CPS, which happens to be the case with no-style masking. For this reason, our CPS metric logic boils down to simply comparing SentenceBERT embeddings with cosine similarity, a similar landing place that others<sup class="footnote-ref"><a href="#fn21" id="fnref21">[21]</a></sup><sup class="footnote-ref"><a href="#fn22" id="fnref22">[22]</a></sup><sup class="footnote-ref"><a href="#fn23" id="fnref23">[23]</a></sup> have also arrived at.</p>
<p>Manual error analysis has revealed that our classifier-based attribution scores and style-token selection logic isn’t consistent, nor precise enough at isolating only stylistic elements. As a result, meaningful content tokens are mistakenly removed which hinders content preservation measurement more than just leaving all tokens in. We discuss these challenges further in the following sections.</p>
<h5 id="dependence-on-style-classifier">Dependence on style classifier</h5>
<p>Both of the metrics we’ve implemented depend on the availability of a well-fit style classification model. This requirement translates to the need for labeled data. And while this isn’t an issue for parallel TST tasks, it becomes a non-starter for the vast majority of style attributes where parallel data isn’t available.</p>
<p>Even when parallel data is available, it’s imperative that the trained model is performant. As we’ll see in a later section, data quality issues can lead to a classifier that learns patterns that are unrepresentative of the true target attribute and result in an error-prone model. Since the STI metric is built directly on classifier distribution outputs, it is apparent that errors with the model will surface as errors in the style metric.</p>
<p>Similarly, the CPS metric uses the word attributions that are derived from the classifier as the basis for style token masking. If the model learns incorrect relationships between features and style classes, errors in word attribution scores can cause the wrong tokens to be masked. Unfortunately, there is minimal tolerance for error in style masking because incorrectly masking a content-related token (e.g. proper noun) can completely alter the semantics, producing a very low similarity score.</p>
<h5 id="style-token-selection">Style token selection</h5>
<p>While our method for isolating style tokens in a sentence is driven by robust, contextual feature importances, the actual token selection methodology has room for improvement.</p>
<p>To begin, feature importances are attributed per token. Because BERT uses a word-piece tokenizer, we can see fragments of the same word with drastically different attribution values. For example, in Figure 3 above, we find that the term “strikingly” is tokenized in to the word pieces “striking” and “##ly”, with the former attributed to ~15% importance and the latter just ~1%. Our current implementation considers these independently, and therefore applies a mask to just the root word alone. A considerable improvement would be to introduce logic that looks at combined scores for word pieces.</p>
<p>In addition, our method applies a “global” threshold to determine the amount of style (and therefore corresponding tokens) that are masked out. At a minimum, one token is always masked. This logic could be improved as there is likely a relationship between length of sentence and maximum token feature importance. There are also cases where a sentence doesn’t contain any style-related terms, and therefore masking one token incorrectly removes content by default.</p>
<h5 id="decoupling-style-from-content">Decoupling style from content</h5>
<p>Our content preservation metric naively assumes that style can in fact be disentangled from content.</p>
<p>This remains an open question in the NLP research community<sup class="footnote-ref"><a href="#fn24" id="fnref24">[24]</a></sup>, but from our experience and research, it seems there is growing consensus that style is woven into the content of written language, and the degree to which it can be separated is highly attribute-dependent. For the attribute of subjectivity, we believe that style is (at least partially) separable from content. For example, removing subjective modifiers (e.g. adjectives and adverbs) can change the style of a sentence without unwanted impact to semantics.</p>
<p>However, the challenge arises when theory meets practice. As we’ve found, automated methods for disentangling stylistic elements are consistently fraught with error, especially when operating in the lexical space (i.e. masking tokens). Newer approaches to text style transfer propose the separation of style from semantics in latent space representations with both supervised and unsupervised methods. We are encouraged by these efforts and look forward to continued research on this topic.</p>
<h5 id="are-these-metrics-better-than-bleu%3F">Are these metrics better than BLEU?</h5>
<p>While we believe the STI and CPS metrics enable a more nuanced evaluation of text style transfer output than a singular BLEU score, we cannot say if these metrics are “better” without some human evaluated baseline to compare against. A “better” evaluation metric is just one that correlates stronger with human judgment, as this is the ultimate goal of automated evaluation.</p>
<p>Unfortunately, conducting human evaluation is outside the scope of our current research endeavor, but we do propose this as future work to build upon. In particular, we suggest conducting human evaluation in accord with <a href="https://arxiv.org/pdf/1904.02295.pdf">this paper</a> as a means to produce reliable evaluation benchmarks.</p>
<p>It’s important to note that while human evaluation is the “best” means for evaluating generated text, it still isn’t without issue. That’s because determining if something is subjective vs. neutral is itself subjective. Subjective evaluation tasks likely lead to a higher degree of variability even among human reviewers.</p>
<h3 id="evaluating-bart-with-sti-%26-cps">Evaluating BART with STI &amp; CPS</h3>
<p>With our custom metrics defined, we utilize them to evaluate our <a href="https://huggingface.co/cffl/bart-base-styletransfer-subjective-to-neutral">fine-tuned BART model’s</a> ability to neutralize subjective language on the held out test set. We calculate STI and CPS scores between both the source and generated text, as well as the source and ground truth target annotation. Comparing metrics across these pairs helps build intuition for their overall usefulness and enables us to isolate edge cases of unexpected performance.</p>
<figure><img src="figures/FF24_a5.png" alt="Figure 19: Distribution of STI and CPS scores on the held out test set. “Pred” corresponds to scores between source and generated text, while “target” corresponds to scores between source and ground truth annotation."><figcaption>Figure 19: Distribution of STI and CPS scores on the held out test set. “Pred” corresponds to scores between source and generated text, while “target” corresponds to scores between source and ground truth annotation.</figcaption></figure>
<h4 id="content-preservation-score-(cps)">Content Preservation Score (CPS)</h4>
<p>CPS score is built on cosine similarity and so it naturally ranges from 0-1. Figure 6 highlights the strong, left-skewed distribution of both the source-to-target and source-to-prediction examples. This result makes sense because we expect input and output pairs to be largely similar in semantics as that is the essence of this task and dataset – to slightly modify style while retaining meaning.</p>
<p>We see very similar distributions between target and predicted samples, with the source-to-predicted pairs having slightly higher median CPS scores and a smaller standard deviation. As we’ll see, this finding hints at the conservative nature of our model (i.e. modest edits compared to human-made edits), as well as the perceptible data quality issues present in the full WNC corpus.</p>
<p>We analyze edge cases of mismatched performance between the model outputs and ground truths in Figure 7 below to better understand the strengths and weaknesses of our metrics.</p>
<figure><img src="figures/FF24_a6.png" alt="Figure 20: Sample WNC pairs that demonstrate common themes around the CPS metric. Specifically, cases where target_cps &gt;&gt; predicted_cps (1-3) and target_cps &lt;&lt; predicted_cps (4)."><figcaption>Figure 20: Sample WNC pairs that demonstrate common themes around the CPS metric. Specifically, cases where target_cps &gt;&gt; predicted_cps (1-3) and target_cps &lt;&lt; predicted_cps (4).</figcaption></figure>
<p>From Figure 20, we see that examples 1-3 highlight the scenario where the ground truth annotation preserves content much better (as defined by CPS) than the model’s output, and the opposite for example 4. These examples demonstrate common themes (numerically matched below) that we’ve found through our error analysis.</p>
<ol>
<li><strong><em>The BART model tends toward brevity -</em></strong> The trained seq2seq model has learned that omission of content is generally a good tactic for reducing subjectivity. This is seen in the example above where the model selects an abbreviated version of the input. Because the model omits part of the content (i.e. “being the most successful club”), our CPS metric punishes the score relative to the ground truth.</li>
<li><strong><em>SentenceBERT penalizes missing content -</em></strong> As expected, SentenceBERT embedding similarity captures the omission of important words. In this example, the prediction is penalized for dropping the important subject “Denmark”.</li>
<li><strong><em>CPS slips when style tokens are the difference -</em></strong> In contrast with example #2, our CPS metric struggles when the omitted words (“most serious”) are actually style related. In this example, CPS produces a disagreeably low score for the prediction as compared to the ground truth despite it largely retaining the semantic meaning. This demonstrates the imperative of isolating style elements from content. We tested removing these style-related terms (“most serious”) which resulted in a CPS score more representative of the semantic alignment.</li>
<li><strong><em>Factual edits are out-of-scope -</em></strong> In this example, our model generated text produces a much higher CPS than the ground truth. This is due to the annotator’s introduction of new facts, or out-of-context information, that the model should not be expected to produce. We consider edits of this type to be outside the scope of our intended modeling task.</li>
</ol>
<p>Overall, we see that our CPS metric has its strengths and weaknesses. We believe this metric is useful for providing a general indication of content preservation because low scores truly mark dissimilar content. However, this metric lacks marginal specificity and struggles to quantify small differences in content with accuracy.</p>
<h4 id="style-transfer-intensity-(sti)">Style Transfer Intensity (STI)</h4>
<p>Unlike CPS, style transfer intensity ranges from -1 to 1 because movements away from the target style are penalized. We see from Figure 6 (above) and Figure 21 (below) that source-to-target and source-to-prediction STI distributions are very similar, which suggests the style transfer model is generally doing a good job of neutralizing text to resemble that of the ground truth.</p>
<figure><img src="figures/FF24_a7.png" alt="Figure 21: Histogram of STI scores on held out test set. “Pred” corresponds to scores between source and generated text, while “target” corresponds to scores between source and ground truth annotation."><figcaption>Figure 21: Histogram of STI scores on held out test set. “Pred” corresponds to scores between source and generated text, while “target” corresponds to scores between source and ground truth annotation.</figcaption></figure>
<p>However, there is a clear discrepancy between the distributions at STI value of 0. Here we see a significant number of generations that result in no change in style – these are cases where we found the model simply repeats the input as output. This implies that model is conservative in nature (i.e. refrains from making unsure edits) and explains the lower median STI score for the source-to-target population (0.19 vs. 0.24)</p>
<figure><img src="figures/FF24_a8.png" alt="Figure 22: Sample WNC pairs that demonstrate common themes around the STI metric. Specifcally, cases where target_sti &lt; 0 (1), target_sti &gt;&gt; pred_sti (2-3), and target_sti &lt;&lt; pred_sti (4)."><figcaption>Figure 22: Sample WNC pairs that demonstrate common themes around the STI metric. Specifcally, cases where target_sti &lt; 0 (1), target_sti &gt;&gt; pred_sti (2-3), and target_sti &lt;&lt; pred_sti (4).</figcaption></figure>
<p>Like in the CPS analysis, we can look at edge cases shown in Figure 22 to highlight themes about model and metric quality.</p>
<ol>
<li><strong><em>Incorrect target annotations -</em></strong> Figure 22 reveals that there are examples where the ground truth STI score is negative – implying that the ground truth annotation is more subjective than the source, which we can verify by looking at this first example. We see that the target text introduces the subjective modifier “flawed”, which is clearly a labeling error. There are quite a few of these data quality issues that should be investigated and corrected in the dataset for future work.</li>
<li><strong><em>BART can be partially correct -</em></strong> As shown here, there are many instances where the style transfer model correctly edits one instance of subjectivity in a sentence (e.g. removes “prestigious”), but misses additional occurrences (e.g. “moving”).</li>
<li><strong><em>Classifier error surfaces in STI metric -</em></strong> As discussed previously, STI depends on the quality of the style classification model. This example shows where the classifier incorrectly associates “grammy nominated” as a subjective modifier, when in fact the modifier phrase consists of neutral content.</li>
<li><strong><em>BART sometimes does better than ground truth -</em></strong> By inspecting cases where target_sti &lt;&lt; pred_sti, we find examples where the fine-tuned style transfer model legitimately outperforms the ground truth – a hopeful insight into the potential usefulness of the model.</li>
</ol>
<h5 id="interpreting-the-sti-metric">Interpreting the STI metric</h5>
<p>Style transfer intensity, as defined above, produces a directional magnitude indicating the distributional shift between style classifications from an input and output text. While this is a useful metric, it is difficult to compare across examples because the value is not normalized. For example, an STI score of 0.1 appears to be a weak indication of style transfer. But if that score corresponds to a distribution shift from [0.1, 0.9] to [0.0, 1.0], it actually represents the maximum possible shift in style because the distribution only had little room for improvement. Therefore, what appears to be a low STI score actually captured 100% of the possible target style gap. It would make little sense to put this example on the same footing as a distribution shift from [0.9, 0.1] to [0.8, 0.2].</p>
<p>This highlights the fact that STI should be measured relative to the total <em>potential</em> for style transfer. For this reason, we recommend representing STI as a percentage of the total possible, directionally corrected STI gain. If the output text distribution moves closer towards the target style class, the metric represents the percentage of the possible <em>target</em> style distribution that was captured. If output text distribution moves further from the target style class, the metric represents the percentage of the possible <em>source</em> style distribution that was captured.</p>
<h2 id="ethical-considerations">Ethical Considerations</h2>
<p>In this final section, we’ll discuss some ethical considerations when working with natural language generation systems and describe the design of our prototype application: <a href="https://huggingface.co/spaces/cffl/Exploring_Intelligent_Writing_Assistance">Exploring Intelligent Writing Assistance</a>.</p>
<h3 id="ethics-as-a-criteria-for-topic-selection-in-research">Ethics as a criteria for topic selection in research</h3>
<p>Standard practices for “responsible research” in the field of machine learning have begun to take hold. We now have datasheets for novel datasets, which are intended to document a dataset’s motivation, composition, collection process, source of bias, and intended use<sup class="footnote-ref"><a href="#fn25" id="fnref25">[25]</a></sup>. Similarly, we have model cards that encourage transparent model reporting by detailing expected usage, performance characteristics, and model lineage<sup class="footnote-ref"><a href="#fn26" id="fnref26">[26]</a></sup>. While adoption of these practices still has room to grow, the seed is planted and has laid the foundation for increased transparency and accountability within the machine learning community.</p>
<p>However, both of these artifacts are backward looking – describing considerations of work products that have already been created. It is equally as important to consider ethical implications at the genesis of a project, before any research effort is underway. Similar to datasheets and model cards, <em>ethics sheets</em> have been proposed to encourage researchers to think about ethical considerations not just at the level of individual models and datasets, but also at the level of ML/AI tasks prior to engaging in a research endeavor<sup class="footnote-ref"><a href="#fn27" id="fnref27">[27]</a></sup>. An ethics sheet for an AI task is a semi-standardized article that aggregates and organizes a wide variety of ethical considerations relevant for that task. Creating an ethically focused document before researching or building an AI system opens discussion channels, creates accountability, and may even discourage project pursuance based on the supporting analysis.</p>
<p>For these reasons, our team engaged in brainstorming activity prior to researching the task of “automatically neutralizing subjectivity bias in text” to consider potential benefits and harms of exploring and modeling the style attribute of subjectivity. We review some of our considerations below.</p>
<h4 id="potential-benefits">Potential benefits</h4>
<p>As discussed in the earlier, subjective language is all around us. It makes for a useful style of communication by which we express ourselves and influence others. However, there are certain modes of communication today like textbooks and encyclopedias that strive for neutrality. A neutral tone is what this type of audience expects and demands.</p>
<p>In this context, a tool to automatically detect subjectively-toned language and suggest neutrally-toned counterparts could be helpful for several parties. For authors and editors, a tool of this kind could enable more efficient and comprehensive review of new and existing content – resulting in a higher standard of quality throughout published material. For content consumers, this type of tool could provide reading assistance to help alert readers when subjectivity bias is concealed within content they perceive to be neutrally-toned and factual.</p>
<h4 id="potential-risks">Potential risks</h4>
<p>Most modern language models used for generative tasks today build representations based on massive, uncensored datasets, which are subsequently fine-tuned on a smaller, focused corpora for a particular task. Therefore, these fine-tuned models inherit all of the potential risks associated with the large foundation models, plus any application specific concerns.</p>
<p>In this sense, our task adopts the risk of a model unintentionally reflecting unjust, toxic, and oppressive speech present in the training data. The consequences of this are that learning and projecting unknown biases can perpetuate social exclusion, discrimination, and hate speech<sup class="footnote-ref"><a href="#fn28" id="fnref28">[28]</a></sup>. Language models also risk introducing factually false, misleading, or sensitive information into generated outputs.</p>
<p>There is also the potential for malicious actors to intentionally cause harm with such a tool. While our efforts focus only on modeling the <em>subjective-to-neutral</em> style attribute direction, successful methods for generating neutral-toned text could be reverse engineered to model the opposite. Generating subjectively biased text, automatically and at scale, could be used to undermine public discourse.</p>
<p>Similarly, adapting a successful modeling approach to a tangentially related style transfer task (e.g. political slant) could be used to exploit the [political] views of the masses if used for a malevolent social agenda. And finally, what is a world without opinion? A model that can silence the expressiveness of individual language could numb our ability to convey thoughts and feelings in online channels.</p>
<h4 id="should-these-risks-discourage-research">Should these risks discourage research</h4>
<p>An upfront discussion of ethics is intended to capture various considerations that should be taken into account when deciding whether to develop a certain system, how it should be built, and how to assess its societal impact<sup class="footnote-ref"><a href="#fn29" id="fnref29">[29]</a></sup>. Ultimately, the concerns we’ve raised above do not simply “go away” by not exploring them. Instead, given the existing maturity of this field of NLP, we view this as an opportunity to increase transparency by surfacing the risks, along with our findings, best practices, and mitigating strategies.</p>
<h3 id="designing-an-intelligent-writing-assistant">Designing an intelligent writing assistant</h3>
<p>To highlight the potential of this NLP task, we’ve bundled together our research artifacts into an <em>intelligent writing assistance</em> application that demonstrates how text style transfer can be used to enhance the human writing experience.</p>
<p>We emphasize the imperative for a human-in-the-loop user experience as a risk-mitigation strategy when designing natural language generation systems. We believe text style transfer has the potential to empower writers to better express themselves, but not by blindly generating text. Rather, generative models, in conjunction with interpretability methods, should be combined to help writers understand the nuances of linguistic style and suggest stylistic edits that <em>may</em> improve their writing.</p>
<figure><img src="figures/FF24_a9.png" alt="Figure 23: Screenshot of our prototype application: Exploring Intelligent Writing Assistance."><figcaption>Figure 23: Screenshot of our prototype application: <em>Exploring Intelligent Writing Assistance</em>.</figcaption></figure>
<p>The goal of this application is to peel back the curtains on how an intelligent writing assistant might function — walking through the logical steps needed to automatically re-style a piece of text while building up confidence in the model output.</p>
<p>The user can choose to transfer style between two style attributes: <em>subjective-to-neutral</em> or <em>informal-to-formal</em>. After entering some text (or selecting a preset option), the input is classified to detect if a style transfer is actually needed. Then, an interpretability technique called <a href="https://arxiv.org/pdf/1703.01365.pdf">Integrated Gradients</a> is used to explain the classifier’s predictions in terms of its features, giving the user a look at what lexical components constitute a particular style. Next, the user can generate a style transfer while toggling the sequence-to-sequence model’s decoding parameters. Finally, the generated suggestion is evaluated to provide the user with a measure of quality via two automated metrics: <em>Style Transfer Intensity (STI)</em> and <em>Content Preservation Score (CPS)</em>.</p>
<h2 id="conclusion">Conclusion</h2>
<p>At last, we’ve made it to the final chapter of this research report. We started by broadly introducing the NLP task of text style transfer and discussing the often overlooked, but important role that style plays in the successful adoption of NLP technologies. We then explored how conditional language modeling approaches can be applied to the task of automatically neutralizing subjectivity bias. In doing so, we were faced with the nuanced difficulty of evaluating natural language generation (NLG), and implemented automated metrics to quantify style transfer strength and content preservation for our model outputs. Finally, we discussed some ethical considerations that should be attended to when designing an NLG system and described our prototype.</p>
<p>We hope you’ve enjoyed this report as much as we’ve enjoyed researching and writing about this exciting topic. We’ll close out this series with a listing of all project outputs for quick reference.</p>
<div class="info">
<p><strong>Research Report:</strong></p>
<ul>
<li><a href="https://text-style-transfer.fastforwardlabs.com/">You’re reading it!</a></li>
</ul>
<p><strong>Blog Series:</strong></p>
<ul>
<li><a href="/2022/03/22/an-introduction-to-text-style-transfer.html">Part 1: An Introduction to Text Style Transfer</a></li>
<li><a href="/2022/05/05/neutralizing-subjectivity-bias-with-huggingface-transformers.html">Part 2: Neutralizing Subjectivity Bias with HuggingFace Transformers</a></li>
<li><a href="/2022/07/11/automated-metrics-for-evaluating-text-style-transfer.html">Part 3: Automated Metrics for Evaluating Text Style Transfer</a></li>
<li><a href="/2022/07/29/ethical-considerations-when-designing-an-nlg-system.html">Part 4: Ethical Considerations When Designing NLG Systems</a></li>
</ul>
<p><strong>Code:</strong></p>
<ul>
<li>Research Code - <a href="https://github.com/fastforwardlabs/text-style-transfer">Text Style Transfer: Neutralizing Subjectivity Bias with Huggingface Transformers</a></li>
<li>Applied ML Prototype (AMP) - <a href="https://github.com/cloudera/CML_AMP_Intelligent_Writing_Assistance">Exploring Intelligent Writing Assistance</a></li>
</ul>
<p><strong>HuggingFace Artifacts:</strong></p>
<ul>
<li>Model: <a href="https://huggingface.co/cffl/bert-base-styleclassification-subjective-neutral">Subjective-neutral Style Classification</a></li>
<li>Model: <a href="https://huggingface.co/cffl/bart-base-styletransfer-subjective-to-neutral">Subjective-to-neutral Style Transfer</a></li>
<li>Space: <a href="https://huggingface.co/spaces/cffl/Exploring_Intelligent_Writing_Assistance">Exploring Intelligent Writing Assistance</a></li>
</ul>
</div>
<hr class="footnotes-sep">
<section class="footnotes">
<ol class="footnotes-list">
<li id="fn1" class="footnote-item"><p><a href="https://arxiv.org/pdf/2004.14257.pdf">Politeness Transfer: A Tag and Generate Approach</a> <a href="#fnref1" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn2" class="footnote-item"><p><a href="https://arxiv.org/pdf/2011.00416.pdf">Deep Learning for Text Style Transfer: A Survey</a> <a href="#fnref2" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn3" class="footnote-item"><p><a href="https://www.researchgate.net/publication/253250805_The_Rest_of_the_Story_Finding_Meaning_in_Stylistic_Variation">The Rest of the Story: Finding Meaning in Stylistic Variation</a> <a href="#fnref3" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn4" class="footnote-item"><p><a href="https://arxiv.org/pdf/2011.00416.pdf">Deep Learning for Text Style Transfer: A Survey</a> <a href="#fnref4" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn5" class="footnote-item"><p><a href="https://arxiv.org/pdf/2011.00416.pdf">Deep Learning for Text Style Transfer: A Survey</a> <a href="#fnref5" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn6" class="footnote-item"><p><a href="https://arxiv.org/pdf/2011.00416.pdf">Deep Learning for Text Style Transfer: A Survey</a> <a href="#fnref6" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn7" class="footnote-item"><p><a href="https://arxiv.org/pdf/1911.09709.pdf">Automatically Neutralizing Subjective Bias in Text</a> <a href="#fnref7" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn8" class="footnote-item"><p><a href="https://arxiv.org/pdf/2004.14257.pdf">Politeness Transfer: A Tag and Generate Approach</a> <a href="#fnref8" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn9" class="footnote-item"><p><a href="https://arxiv.org/pdf/2010.12742.pdf">Text Style Transfer: A Review and Experimental Evaluation</a> <a href="#fnref9" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn10" class="footnote-item"><p><a href="https://arxiv.org/pdf/1911.09709.pdf">Automatically Neutralizing Subjective Bias in Text</a> <a href="#fnref10" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn11" class="footnote-item"><p><a href="https://en.wikipedia.org/wiki/Wikipedia:Neutral_point_of_view">Wikipedia:Neutral point of view</a> <a href="#fnref11" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn12" class="footnote-item"><p><a href="https://en.wikipedia.org/wiki/Wikipedia:NPOV_means_neutral_editing,_not_neutral_content">Wikipedia: NPOV means neutral editing, not neutral content</a> <a href="#fnref12" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn13" class="footnote-item"><p><a href="https://en.wikipedia.org/wiki/Wikipedia:Neutral_point_of_view">Wikipedia:Neutral point of view</a> <a href="#fnref13" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn14" class="footnote-item"><p><a href="https://aclanthology.org/P13-1162.pdf">Linguistic Models for Analyzing and Detecting Biased Language</a> <a href="#fnref14" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn15" class="footnote-item"><p><a href="https://arxiv.org/pdf/1911.09709.pdf">Automatically Neutralizing Subjective Bias in Text</a> <a href="#fnref15" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn16" class="footnote-item"><p><a href="https://arxiv.org/pdf/1910.13461.pdf">BART: Denoising Sequence-to-Sequence Pre-training for Natural Language Generation, Translation, and Comprehension</a> <a href="#fnref16" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn17" class="footnote-item"><p><a href="https://arxiv.org/pdf/1904.09675.pdf">BERTSCORE: Evaluating Text Generation with BERT</a> <a href="#fnref17" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn18" class="footnote-item"><p><a href="https://arxiv.org/pdf/2202.08479.pdf">Revisiting the Evaluation Metrics of Paraphrase Generation</a> <a href="#fnref18" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn19" class="footnote-item"><p><a href="https://arxiv.org/pdf/1904.02295.pdf">Evaluating Style Transfer for Text</a> <a href="#fnref19" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn20" class="footnote-item"><p><a href="https://arxiv.org/pdf/1904.02295.pdf">Evaluating Style Transfer for Text</a> <a href="#fnref20" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn21" class="footnote-item"><p><a href="https://arxiv.org/pdf/1904.09675.pdf">BERTSCORE: Evaluating Text Generation with BERT</a> <a href="#fnref21" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn22" class="footnote-item"><p><a href="https://arxiv.org/pdf/2004.05001.pdf">Style-transfer and Paraphrase: Looking for a Sensible Semantic Similarity Metric</a> <a href="#fnref22" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn23" class="footnote-item"><p><a href="https://arxiv.org/pdf/2011.00416.pdf">Deep Learning for Text Style Transfer: A Survey</a> <a href="#fnref23" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn24" class="footnote-item"><p><a href="https://arxiv.org/pdf/1808.04365.pdf">What is wrong with style transfer for texts?</a> <a href="#fnref24" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn25" class="footnote-item"><p><a href="https://arxiv.org/pdf/1803.09010.pdf">Datasheets for Datasets</a> <a href="#fnref25" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn26" class="footnote-item"><p><a href="https://arxiv.org/pdf/1810.03993.pdf">Model Cards for Model Reporting</a> <a href="#fnref26" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn27" class="footnote-item"><p><a href="https://aclanthology.org/2022.acl-long.573.pdf">Ethics Sheets for AI Tasks</a> <a href="#fnref27" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn28" class="footnote-item"><p><a href="https://dl.acm.org/doi/pdf/10.1145/3531146.3533088">Taxonomy of Risks posed by Language Models</a> <a href="#fnref28" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn29" class="footnote-item"><p><a href="https://aclanthology.org/2022.acl-long.573.pdf">Ethics Sheets for AI Tasks</a> <a href="#fnref29" class="footnote-backref">↩︎</a></p>
</li>
</ol>
</section>

        </div>
      </body>
   </html>
  